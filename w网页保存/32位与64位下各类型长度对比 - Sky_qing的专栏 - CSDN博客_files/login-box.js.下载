!function(N,O){var G=window.jQuery||{},e=O,g=window.document,i="data-bind-login",B=O,h="login-box",v="login-mark";N.loginBox=N.loginBox?N.loginBox:{},G===window.jQuery?($selectorAll=function(e){var t=[];return G(e).each(function(e,n){t.push(n)}),t},function(e){return G(e).get(0)},e=!0):$selectorAll=function(e){return document.querySelectorAll(e)},G.LOGIN=G.LOGIN||{},G.LOGIN.isInit=!0,N.loginBox.scope=G.LOGIN;var r=function(){G.LOGIN.docDom&&(g.body.appendChild(G.LOGIN.oMark),g.body.appendChild(G.LOGIN.docDom),G.LOGIN.appendBox.isCreate=!0)},o=N.loginBox.login=function(e){var n,t,o,i,r,a,s,l,c,d,u,f,m,p,I,L={domain:(e=e||{}).domain||"csdn.net",isRedirect:e.isRedirect||!document.createElement("iframe").sandbox,iframeName:e.iframeName||"passport_iframe",isIframe:e.isIframe===O||e.isIframe,frameWidth:e.frameWidth,frameHeight:e.frameHeight,append:e.append||"#passport-box",isClosedBtn:null==e.isClosedBtn||!!e.isClosedBtn,from:e.from,service:e.service,loginService:e.loginService,initRun:e.initRun||null,before:e.before||null,after:e.after||null,finished:e.finished||null};if(!L.loginService)throw new Error("login 处理 control错误！");return G.LOGIN.options=L,G.LOGIN.runStatus=!0,L.isIframe&&(L.initRun&&(G.LOGIN.runStatus=L.initRun()),G.LOGIN.runStatus&&(G.LOGIN.runStatus=(i=(n=L).domain,r=n.from,a=n.append,s=n.isClosedBtn,l=n.service,c=n.isRedirect,d=n.loginService,u=n.isIframe,f=n.iframeName,m=n.frameWidth,p=n.frameHeight,(I=document.createElement("div")).className=v,g.domain=i||"csdn.net",r&&(d=d+"?from="+r,l&&(d=d+"&service="+l)),console.debug("处理service:",d),B=document.createDocumentFragment(),t='<iframe  width="'+m+'" height="'+p+'" name="'+f+'" src="'+d+'" frameborder="0" scrolling="no"></iframe>',(o=document.createElement("div")).id=a.replace(/[#\.]/,""),o.className=h,G.LOGIN.appendBox=o,G.LOGIN.markDom=I,u&&(G.LOGIN.appendBox.innerHTML=t,G.LOGIN.iframeName=f,G.LOGIN.iframeDom=G.LOGIN.appendBox.firstElementChild||G.LOGIN.appendBox.firstChild),s&&(cssStyle="display: inline-block; color: #999; font-size: 22px; cursor: pointer; position:absolute; top:2%; right:5%;-moz-user-select:none; -webkit-user-select:none; user-select:none;",closeBtn=document.createElement("span"),closeBtn.style=cssStyle,closeBtn.innerHTML="&times",o.appendChild(closeBtn),G.LOGIN.closeBtn=closeBtn),B&&(B.appendChild(o),G.LOGIN.oMark=I,G.LOGIN.docDom=B),G.LOGIN.isRedirect=c,!0))),N.loginBox},a=function(e){return G.LOGIN.runStatus=G.LOGIN.options[e]?G.LOGIN.options[e]():G.LOGIN.runStatus,G.LOGIN.runStatus},s=function(e,n,t){window.addEventListener?e.addEventListener(n,t,!1):e.attachEvent("on"+n,t)},l=function(e,n){var t;return t="all"===e?"none":"block","start"===e&&(t="block"),G.LOGIN.appendBox&&(G.LOGIN.markDom.style.display=t,G.LOGIN.appendBox.style.display=t,G.LOGIN.appendBox.status="block"===t||!(G.LOGIN.runStatus=!0)),G.LOGIN.appendBox.status&&n&&n(),G.LOGIN},c=function(){var e=function(e){var n=window.event||e;if(G.LOGIN.appendBox.status)return l("all"),n.cancelBubble?n.cancelBubble=!0:n.stopPropagation(),!1};G.LOGIN.oMark&&!G.LOGIN.oMark.isClick&&(s(G.LOGIN.oMark,"click",e),G.LOGIN.oMark.isClick=!0),G.LOGIN.closeBtn&&G.LOGIN.oMark.isClick&&!G.LOGIN.closeBtn.isCloseClick&&(s(G.LOGIN.closeBtn,"click",e),G.LOGIN.closeBtn.isCloseClick=!0)};N.loginBox.close=function(){return G.LOGIN.appendBox.status&&l("all"),N.loginBox},N.loginBox.show=function(){return!G.LOGIN.appendBox.isCreate&&r(),G.LOGIN.appendBox.status||(l("start"),c()),N.loginBox};N.loginBox.support=function(){return G.LOGIN.isRedirect};var d,n=function(){var e,n,t;e=g.head,n=e.firstElementChild||e.firstChild,(t=document.createElement("style")).innerText=".login-box{position: fixed;display: none;left: 50%;top: 50%;z-index: 10000;-webkit-transform: translate(-50%, -50%);-ms-transform: translate(-50%, -50%);-o-transform: translate(-50%, -50%);-moz-transform: translate(-50%, -50%);transform: translate(-50%, -50%);background-color: #fff;}.login-mark{position: fixed;top: 0;left: 0;z-index: 9999;background-color: rgba(0, 0, 0, 0.5);width: 100%;height: 100%;display: none;}",e.insertBefore(t,n),function(){G.LOGIN.loginBtn=$selectorAll("[data-bind-login=true]");var e,n,t=function(e){var n=window.event||e,t="true"===this.getAttribute(i),o=this.href;if(!G.LOGIN.runStatus&&t)return console.error("开启loginbox失败!"),!1;!1===G.LOGIN.isRedirect?!0===t&&(G.LOGIN.options.isIframe&&(!G.LOGIN.appendBox.isCreate&&r(),a("before")&&l(O,function(){a("after")}),c()),n.cancelBubble?n.cancelBubble=!0:n.stopPropagation(),n.returnValue?n.returnValue=!1:n.preventDefault()):o||(g.location.href=G.LOGIN.options.loginService)},o=0;if(!G.LOGIN.loginBtn||G.LOGIN.loginBtn.length<=0)return;for(;G.LOGIN.loginBtn[o];)e=o,n=G.LOGIN.loginBtn[e],s(n,"click",t),o++}(),G.LOGIN.isInit&&o({domain:"csdn.net",isIframe:!0,frameWidth:358,frameHeight:427,append:"#passportbox",from:window.location.href,loginService:"https://passport.csdn.net/account/login"})},t=function(e){var n,t,o,i;document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(function(){e&&e()},0):(d=function(){document.removeEventListener("DOMContentLoaded",d,!1),e()},document.addEventListener("DOMContentLoaded",d,!1)):document.attachEvent&&(n=e,t=!1,o=function(){t||(t=!0,n&&n())},(i=function(){try{g.documentElement.doScroll("left")}catch(e){return void setTimeout(i,50)}o()})(),g.onreadystatechange=function(){"complete"===g.readyState&&(g.onreadystatechange=null,o())})};_ready=function(){e&&G(function(){n()})||t(n)},_ready()}(window.csdn=window.csdn||{},void 0);