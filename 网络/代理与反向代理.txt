代理（代理客户端，网络位置上处在客户机一侧）
    代理服务器（Proxy Server）的功能是代理网络用户去取得网络信息，
    有了它之后，浏览器不是直接到Web服务器去取回网页而是向代理服务器发出请求，
    请求信号会先送到代理服务器，由代理服务器来取回浏览器所需要的信息并传送给你的浏览器。
    
    而且，大部分代理服务器都具有缓冲的功能，就好像一个大的Cache，它不断将新取得数据包存到它本机的存储器上，
    如果浏览器所请求的数据在它本机的存储器上已经存在而且是最新的，
    那么它就不重新从Web服务器取数据，而直接将存储器上的数据传送给用户的浏览器，这样就能显著提高浏览速度和效率。
    
    代理服务器不仅可以实现提高浏览速度和效率的功能，
    它还可以实现网络的安全过滤、流量控制（减少Internet使用费用）、用户管理等功能，
    因此它既是一种网络防火墙技术，同时也可以解决许多单位连接Internet引起IP地址不足的问题。
    
    代理服务器不只是简单地向真正的因特网服务器转发请求，
    它还可以控制用户的行为，对接收到的客户请求进行决策，并根据过滤规则对用户请求进行过滤。
    通过代理服务器，网络管理员可以实现比用包过滤路由器更严格的安全策略。
    
    每当你通过单击链接或在浏览器中手动输入网址访问网站时，
    都会创建并提交一个转发到代理服务器的 Web 请求。
    然后，代理服务器修改并加密你的数据，例如：IP（Internet协议）地址，并前去请求相应的服务器。
    之后，网站将数据发送回你的代理服务器，代理服务器再将网页上的信息传输给你。
    这样，它可以充当防火墙或 Web 过滤器，使你的网页仅显示所需的信息。（可用于广告过滤等功能）
    
    代理服务器是否会修改Ip包里的源ip地址？
    结论：一定会修改的。
    首先，代理是在网络层以上。当你使用代理时，在网络层，ip包里会填写源你的ip与代理机器的ip。
    代理接收到你的数据时，ip包就已经从网络层取出来了，再从代理发出去时，
    目的地就是你真正想访问的地址。源地址就是代理服务器自身。
    如果不改变源ip，目标服务器将会直接把结果返回给你。而不是给代理，代理就被绕过了。
    其次，原封不动是指你的应用层数据原封不动。
    最后，如果你的内容不加密，应用层数据也肯能被偷看和修改。
    
    代理服务器与转发（网关的工作）是不同的
           我们可以将a电脑的默认网关改为b电脑，这样只要a请求的目标ip，不能被路由命中时，
           就会发到b，b会将a数据包的源ip，替换为自己的ip，然后发出去，
           （b对a数据包的源ip替换，是在POSTROUTING链上完成的）
           这样，目标ip回复的数据包会发给b，b再将回复包的目标替换为a的ip，转发到a
           在这个过程中，请求包的目标ip不会被替换，回复包的源ip也不会变
           会变化的是请求包的源ip，和回复包的目标ip
           网关b完成的主要工作就是转发，简单情况下，借助iptables，配合ip-forward，即可完成
           转发的一大特点就是，目的mac是他，而目的ip不是他； 而使用代理时的情况是不同的，
           代理可分为三/四层代理和七层代理，我们所说的代理服务器，通常指的是七层代理
           七层代理是对域名的代理，而不是对ip的代理，
           也就是说，如果要请求某个ip，而这个ip，不是代理服务器的ip时，
           则这个包是不会发到该代理服务器上的
           在a的浏览器中设置了代理后，每当你通过单击链接或在浏览器中手动输入网址访问网站时，
           都会创建并提交一个转发到代理服务器的 Web 请求，此请求的目标ip是代理的ip。
           然后，代理服务器修改并加密你的数据，例如：IP（Internet协议）地址，并前去请求相应的服务器。
           注意，之所以叫七层代理，是因为它确实需要分析应用层（http层）的域名，
           然后根据分析出的域名，将a发出的包的目标ip，替换为真正的请求域名对应的ip，然后发出去。
           四层代理（有的叫三层代理），是只把数据包解析到第四层（运输层），得到ip和端口号
           四层代理的一种应用情形，就是在作反向代理时，根据解析出来的源ip的不同，进行负载均衡
           LVS（一种负载均衡软件）就是完成的四层代理
           四层代理和七层代理除了处理的数据包的深度不同外，其处理tcp连接的方式也是不同的
           file://imgs/七层代理和四层代理处理tcp连接的不同.jpg
               
    安全
        Internet上的代理服务是防火墙的一种形式，属于应用级网关。
        内部网络与外部网络之间没有直接的连接，外部计算机的网络链路只能到达代理服务器，明显地增加了网络的安全性，
        另外，代理服务器相对于包过滤来讲，能进行用户级的认证，
        即可以限制某些用户访问某些Internet站点或使用某种Internet服务等，从而大大提高了网络的安全性。
    
    代理服务器的管理配置
        不同于使用通用的包过滤路由器来管理通过防火墙的因特网服务流向，
        代理服务器通过在网关上为每项需要的应用安装专用的代码（代理服务）来工作。
        如果网络管理员没有为某一特殊服务安装代理服务代码，该服务就不会被支持，也不会通过防火墙转发相应的客户请求。
        并且，这种代理服务器码能被配置成仅支持某项服务的网络管理员认为可以接受的那部分特征，而不支持其他的特征。
        
    代理服务器的功能
        一个lP地址或Internet帐户供多个用户同时使用
        缓存功能，可以降低费用，提高速度
        对内部网络用户进行权限和信息流量计费管理
        对进入内部网络的Internet信息实施监控和过滤

    
反向代理（代理服务器，网络位置上处在服务器一侧？）
    代理服务器的存在，使得外部的电脑看不到内部的电脑，
    所有的内部电脑看起来就像一台电脑（即代理服务器）在跟真正的服务器打交道一样，
    如果内部的这些电脑都是普通用于，这是没问题的，但如果在内部电脑中有一台电脑要做服务器，就会有问题了。
    
    而反向代理服务器就是解决这种问题的办法，配置了反向代理服务器后，它对外宣称自己提供某个端口的服务，
    实际把该端口收到的数据转发给为其配置的真正的内部服务器的地址。
    
    优点
        安全
            外部网络用户通过反向代理访向内部服务器，只能看到反向代理服务器的IP地址和端口号，
            内部服务器对于外部网络来说是完全不可见。
            而且反向代理服务器上没有保存任何的信息资源，所有的网页程序都保存在内部服务器上，
            对反向代理服务器的攻击并不能使真的网页信息系统受到破坏，这样就提高了内部服务器的安全性。
            将反向代理功能与拒绝外部访问防火墙软件合理结合，
            从而构建一种既包含内部网络、也能向外部发布Web信息防火墙系统。
        提高访问速度
            在内部服务器前放置两台反向代理服务器，分别连接到教育网和公网，
            这样公网用户就可以直接通过公网线路访问学校服务器，从而避开了公网和教育网之间拥挤的链路。
            同时反向代理服务器的缓存功能也加快了用户的访问速度。
        节约ip资源
            校园网内部服务器除使用教育网地址外，也会采用公网的IP地址对外提供服务，
            公网分配的IP地址数目是有限的，如果每个服务器有分配-个公网地址，那是不可能的，
            通过反向代理技术很好的解决了IP地址不足的问题
        
    
    