海关：主要负责进出口获取检查
网关：主要负责不同网络间协议转换

网关，GateWay，准确的翻译是门道/闸门/闸道

通常意义上的网关，是路由器，
更抽象广泛意义上的网关，是具有规则/接口/协议转换功能硬件或软件实体
网关是一种概念，路由器是一种实体设备

局域网要通过网关，连接到广域网，如常见的192.168.3.254

路由器WAN口和LAN口的区别
WAN口主要用于连接外部网络，如ADSL、DDN、以太网等各种接入线路;而LAN口用来连接家庭内部网络
当家庭网络中的机器向外部网络发送数据包的时候，首先发送一个请求到默认网关，也就是发送到宽带路由器。
路由器在分析该数据包中的内网IP地址时会检查设备本身的NAT地址转换表。
在找到相应的条目后，就会利用WAN口IP地址去与外部网络进行通信。
外部网络接收到数据包后，会解析出数据包中的路由器的WAN口IP地址，并对该地址进行响应，将响应数据包发送到路由器。
然后路由器再次进行NAT地址转换，将WAN口IP地址转换为发送请求的内网IP地址，最终完成整个数据包的发送和接收过程。
由此可见路由器对TCP/IP包进行了修改，某种意义上这也是属于协议转换的范畴

什么是LAN
LAN（即局域网）是最常见且应用最为广泛的一种网络，它是指在1~5公里范围内两台以上的计算机设备（如服务器、工作站）
通过线缆（如同轴线缆、双绞线、光缆等）连接起来实现的资源共享的计算机网络
目前，以太网（IEEE 802.3 标准）是最常见的局域网组网方式，
近年来随着802.11标准的制定，IEEE802.11a/b/g/n等无线协议得到广泛应用，无线局域网的应用也越来越普及，
此外，LAN（局域网）类型还有令牌环和FDDI（光纤分布数字接口，IEEE 802.8）。

什么是WAN
WAN（即广域网）是指连接不同地区局域网或城域网的计算机网络，其覆盖范围广，可覆盖几千公里，
能连接多个地区、城市和国家，甚至横跨几个洲实现远距离通信
WAN（广域网）涉及到的设备更多样化，如有路由器、交换机、防火墙等
目前WAN（广域网）常用的协议有帧中继交换网（fram-relay）、点对点协议（PPP）、
高级数据链路控制协议（HDLC）以及同步数据链路控制协议（SDLC）。

路由器的工作原理
https://blog.csdn.net/waitforfree/article/details/8842165
过WAN口来PPPoE拨号来获取公网IP地址，LAN里的PC则通过DHCP从路由器上获取LAN私网地址或者LAN里的PC手工指定192.168.X.X的私网地址
在LAN里的PC有访问公网的请求时，路由器通过NAT地址转换等方式，
将LAN里PC的访问请求，变成自身的公网IP地址的访问请求去访问internet上的其他主机，
在对方返回请求的数据后，再将响应的数据返回给LAN里的PC，LAN里的PC获得需要的数据，完成一次访问。

internet上的其他主机如果要访问这个路由器后的LAN里的PC怎么办呢？
https://blog.csdn.net/waitforfree/article/details/8842165
大部分路由器上都有这样一个功能：端口映射或端口转发
在TP-LINK的家用路由器上，这个功能叫"转发规则"，这个功能就是为了完成internet上的其他主机访问路由器后的LAN里的PC用的。
首先，需要知道要完成什么服务，完成这个服务需要的TCP或UDP端口，如：WEB服务默认需要80端口，FTP服务默认需要20和21端口。
其次，需要知道LAN里的PC的私网IP地址
      假如LAN里有两台PC，A和B，A的IP地址是192.168.0.2，B的IP地址是192.168.0.3
      A机想提供WEB服务并已安装相应的WEB服务程序如IIS
      B机想提供FTP服务并已安装相应的服务程序如IIS
第三，在路由器上设置端口映射（TP-LINK路由器上是"转发规则"），添加一个80服务端口，
      将IP地址选择192.168.0.2（就是上例的A机），因WEB服务用的是TCP协议，在协议那部分选择"TCP"，再将"启用"勾上；
      再添加一个20端口和21端口，IP地址则为192.168.0.3（上例中的B机），协议也都选TCP，也要注意将"启用"勾上，
      注意，这样设置的FTP服务只能用PORT模式连接，要用PASV模式还需要做其他设置。
实际上如果只在服务器上设置了 转发规则or端口映射，实际使用中想从WAN直接访问LAN还是会有一些问题，
因为你的router每次拨号得到的wan IP地址是变化的
所以还要加上一个 花生壳 之类的 动态域名功能(将动态变换的WAN IP对应到一个固定的域名)，才是真正实用可行的



