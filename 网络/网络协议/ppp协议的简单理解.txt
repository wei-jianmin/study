PPP协议是建立在电话线（串行）和调制解调器基础上的
因为电话线跟运行商是直接相连的：一条物理线路的一端连着用户，另一端连着运营商
而不是像以太网一样，呈树状/网状分布结构
所以当光猫与运营商建立起连接时，无需类似以太网的mac地址，就能找到用户设备
当建立起通信链路后，PPP支持两端协商是否进行身份验证操作
最后，PPP协议还要进一步给拨号上网的电脑协商一个ip地址，
然后电脑就可以上网了
显然上面描述的这种PPP协议是不适应以太网环境的
所以，所以这种协议逐渐淘汰/进化了
PPPoE就是PPP over Ethernet，是适应以太网环境的 PPP协议
我们知道上面的PPP协议是假定有一条线路直接连接要通信的双方的，
而以太网是多路访问的，如果我们在 PPP的基础上，再封装一层，
使其携带上mac地址，则可等同于在通信的两端有一条（虚拟的）直连线路
这就是PPPoE的原理
---------------------------------------
点对点ppp协议怎样找到对方地址
    点对点获取对方地址其实是一个动态的协商过程，这其中有2个主要步骤
    第一步：建立、配置、测试和管理数据链路连接，即LCP协议
    第二步：NCP协议协商该链路上所传输的数据包格式与类型，建立、配置不同的网络层协议。
    例如：当用户拨号接入 ISP 时，路由器的调制解调器对拨号做出确认，并建立一条物理连接（底层up）。
    PC 机向路由器发送一系列的 LCP 分组（封装成多个 PPP 帧）。
    这个时候经过了通过了认证之后认证服务器会向主机发送一个IP地址，
    点对点PPP协议一般都是用于用户和运营商BRAS之间的链接。
    
---------------------------------------
https://blog.csdn.net/m0_52405419/article/details/120253590
1. 使用点对点信道的数据链路层
在进行数据通信时，两台计算机之间的数据通信往往要经过许多段链路（从一个结点到另一个结点一段物理线路，有线或无线）
当需要在一条线路上传输数据时，除了必须有一条物理线路外，还必须有一些必要的通信协议来控制这些数据的传输，
也就是硬件和软件加到链路上去，就构成了数据链路也称作逻辑链路。例如现在使用网络适配器来实现这些协议。
2. 数据链路层的协议数据单元C帧
数据链路层把网络层交下来的数据构成帧发送到链路上，以及把接收到的帧中的数据取出并交给网络层，
而网络层协议数据单元就是IP数据报（包，分组或数据报）
3. 数据链路层协议的三个基本问题
（1）封装成帧：就是在一段数据的前后分别添加首部和尾部。数据部分长度的最大传送单元CMTU（maximum transfer unit）。
     帧开始符SOH，帧结束符EOT。没有其中任何一个定界符，则丢弃整个数据。
（2）透明传输：倘若在数据部分中出现和转义字符二进制代码一样的文本文件时（例如二进制代码的计算机程序和图像），
     就需要在前面插入一个转义字符ESC，而在接收到数据帧后则会删除转义字符，这种方法叫做字节填充。
（3）差错检查：出错比特/总比特数叫做误码率BER（bit error rate）。
     数据链路层使用循环冗余检查CRC（cyclic redundancy check），是一种方法。而添加在数据后面的冗余码FCS。
（4）对于通信质量良好的信道，数据链路层协议不使用确认和重传机制即向上层提供可靠传输的服务，
     如果出错则需要上层的协议来完成（例如运输层的TCP协议）。
4. 点对点协议PPP
ppp协议就是计算机和ISP进行通信时所用的数据链路层协议。
ppp协议的工作状态：当用户拨号接入ISP后，就建立了一条从用户个人电脑到ISP的物理连接。
此时用户个人电脑向ISP发送一系列的链路控制协议LCP分组（ppp帧），以便建立LCP连接。
接着要进行网络层配置，网络控制协议NCP给接入的用户个人电脑分配一个临时的IP地址。
注：ppp协议不止用于拨号连接，还是路由器之间传输数据使用的一种比较主要的广域网协议
像如华为路由器的端口默认使用的就是ppp协议，思科虽然默认使用dhlc协议，但也可以配为使用ppp协议
路由器使用ppp协议，可以继续为ppp配置身份鉴别协议（如chap）
参：https://blog.csdn.net/github_30605157/article/details/51449577
注：用思科模拟器抓包ppp协议，需先给路由器添加串口模块，然后使用 serial dte 线连接
然后给端口配置为ppp模式，还可进一步配置chap，抓包时，发现抓到的是cdp包
这是思科私有的设备发现协议（也是二层的），ppp协议携带的是内容是cdp包

---------------------------------------

点对点协议（PPP，Point-to-Point Protocol）主要是用来通过拨号或专线方式在两个网络节点之间建立连接、发送数据
PPP是为了在点对点物理链路(例如RS232串口链路、电话ISDN线路等)上传输OSI模型中的网络层报文而设计的
它改进了之前的一个点对点协议CSLIP协议C只能同时运行一个网络协议、无容错控制、无授权等许多缺陷
PPP是现在最流行的点对点链路控制协议。这种连接提供了同时的双向的全双工操作，并且假定数据包是按顺序投递的
PPP是一种数据链路层协议，遵循HDLC（高级数据链路控制协议）族的一般报文格式
PPP是为了在点对点物理链路(例如RS232串口链路、电话ISDN线路等)上传输OSI模型中的网络层报文而设计的
注：数据链路层协议
    首先Ethernet、IEEE802.3、PPP和HDLC都是数据链路层的协议，
    Ethernet和IEEE802.3属于（局域网用的）以太链路层协议
    Ethernet以太网协议，用于实现链路层的数据传输和地址封装
    目前主要有两种格式的以太网帧：Ethernet II（DIX 2.0）和IEEE 802.3
    IP、ARP、EAP和QICQ协议使用Ethernet II帧结构，而STP协议则使用IEEE 802.3帧结构
    Ethernet II是由Xerox与DEC、Intel（DIX）在1982年制定的以太网标准帧格式，后来被定义在RFC894中
    
标准的HDLC封装只支持高层的IP协议，不支持其他高层协议
思科对标准帧协议进行了改进，增加了协议域字段，来支持多种网络层协议（即PPP协议）
思科改进的HDLC可用于在思科的设备之间进行点到点连接。
当连接非思科的设备时，PPP是比较可行的，因为所有厂家实现的PPP都是相同的
PPP协议和大多数硬件兼容，且PPP协议能够承载多种三层协议的数据
PPP是一种数据链路层协议，遵循HDLC（高级数据链路控制协议）族的一般报文格式
PPP是为了在点对点物理链路(例如RS232串口链路、电话ISDN线路等)上传输OSI模型中的网络层报文而设计的
它改进了之前的一个点对点协议CSLIP协议C只能同时运行一个网络协议、无容错控制、无授权等许多缺陷，
PPP是现在最流行（已过时）的点对点链路控制协议。
PPP协议主要包括三部分：
    LCP（Link Control Protocol）链路控制协议、
    NCP（Network Control Protocol）网络控制协议和
    PPP的扩展协议（如Multilink Protocol）
PPP协议默认是不进行认证配置参数选项的协商，它只作为一个可选的参数，当点对点线路的两端需要进行认证时才需配置
LCP是PPP协议的一个子集。
    为了能适应复杂多变的网络环境，PPP协议提供了一种链路控制协议来配置和测试数据通信链路，
    它能用来协商PPP协议的一些配置参数选项；处理不同大小的数据帧；检测链路环路、一些链路的错误；终止一条链路。
网络控制协议（NCP）
    根据不同的网络层协议可提供一组网络控制协议，
    常用的有提供给TCP/IP网络使用的IPCP网络控制协议和提供给SPX/IPX网络使用的IPXCP网络控制协议等，
    但最为常用的是IPCP协议。当点对点的两端进行NCP参数配置协商时，主要是用来获得通信双方的网络层地址
-----------------------------
https://blog.csdn.net/qq_44685426/article/details/122371868
这个网址下有对ppp协议详细的抓包分析
-----------------------------
为什么说ppp协议提供了更好的访问控制功能，该协议都有哪些优点
https://blog.csdn.net/weixin_44216558/article/details/115335659
-----------------------------
https://blog.csdn.net/xinyuan510214/article/details/51361853
ppp协议格式如下：
    F (1Byte)  A (1Byte)  C (1Byte)  协议 (2Byte)  信息 (<=1500Byte)  FCS (2Byte)  F (1Byte)
    首尾的 F 是帧的起始和结束标记
    A 表地址， C 表控制
    协议所占的 2 个字节可为如下值：
        0x0021――信息字段是IP数据包
        0xC021――信息字段是链路控制数据LCP
        0x8021――信息字段是网络控制数据NCP
        0xC023――信息字段是安全性认证PAP
        0xC025――信息字段是LQR
        0xC223――信息字段是安全性认证CHAP
    
    可以看到总共 ppp 协议就是在 ip 包前后加了 8 个字节
    
    具体的过程如下：
    1.  链路静止状态
        链路一定开始并结束于这个阶段。
        当物理设备就绪时，PPP将进入链路建立阶段
    2.  链路建立状态
        LCP用于交换配置信息包（Configure packets，LCP），建立连接
        一旦一个配置成功信息包（Configure-Ackpacket）被发送且被接收，就完成了交换，进入了LCP开启状态
        所有的配置选项都假定使用默认值，除非被配置交换所改变。
        在这个阶段接收的任何非LCP packets必须被静默丢弃
        收到LCP Configure-Request（LCP配置要求）能使链路从网络层协议阶段或者认证阶段返回到链路建立阶段。
    3.  认证阶段：在一些链路上，在允许网络层协议packets交换之前，链路的一端可能需要peer去认证它。
        认证是不需要强制执行的。如果一次执行希望peer根据某一特定的认证协议来认证，
        那么它必须在链路建立阶段要求使用那个认证协议。应该尽可能在链路建立后立即进行认证。
        链路质量检查可以同时发生。在认证完成之前，禁止从认证阶段前进到网络层协议阶段。
        如果认证失败，认证者应该跃迁到链路终止阶段。
        在这一阶段里，只有链路控制协议、认证协议，和链路质量监视协议的packets是被允许的。
        在该阶段里接收到的其他的packets必须被静静的丢弃。
    4.  网络层协议阶段：一旦PPP完成了前面的阶段，每一个网络层协议（例如IP，IPX，或AppleTalk）
        必须被适当的网络控制协议（NCP）分别设定。比如，NCP可以给新接入的PC机分配一个临时的IP地址，
        这样PC机就成为Internet上一个主机了。每个NCP可以随时被打开和关闭。当一个NCP处于Opened状态时，
        PPP将携带相应的网络层协议packets。当相应的NCP不处于Opened状态时，
        任何接收到的被支持的网络层协议packets都将被静静的丢弃。
    5.  链路终止阶段：PPP可以在任意时间终止链路。引起链路终止的原因很多：
        载波丢失、认证失败、链路质量失败、空闲周期定时器期满、或者管理员关闭链路。
        LCP用交换Terminate（终止）packets的方法终止链路。当链路正被关闭时，PPP通知网络层协议，
        以便他们可以采取正确的行动。交换Terminate（终止）packets之后，执行应该通知物理层断开，以便强制链路终止，
        尤其当认证失败时。Terminate-Request（终止-要求）的发送者，在收到Terminate-Ack（终止-允许）后，
        或者在重启计数器期满后，应该断开连接。收到Terminate-Request的一方，应该等待peer去切断，
        在发出Terminate-Request后，至少也要经过一个Restarttime（重启时间），才允许断开。
        PPP应该前进到链路死亡阶段。在该阶段收到的任何非LCPpackets，必须被静静的丢弃。
                
PPP:（PPP：Point to Point Protocol） 
	https://blog.csdn.net/qq_33611327/article/details/77967458
	点对点协议（PPP）为基于点对点连接的多协议自寻址数据包的传输提供了一个标准方法。
	PPP 最初设计是为两个对等结构之间的 IP 流量的传输提供一种封装协议。
	在 TCP-IP 协议集中,它是一种关于同步调制连接的数据链路层协议（OSI 模式中的第二层），
	替代了原非标准第二层协议，即 SLIP。
	除了 IP 以外 PPP 还可以传送其它协议，包括 DECnet 和 Novell 的 Internet 网包交换（IPX）。
	PPP 主要由以下几部分组成：
	封装：
		一种封装多协议数据报的方法。PPP 封装提供了不同网络层协议同时通过统一链路的多路技术。
		（人们）精心的设计 PPP 封装，使其保有对常用支持硬件的兼容性。 
	链路控制协议：
		为了在一个很宽广的环境内能足够方便的使用，PPP 提供了 LCP
		（链路控制协议，简称LCP（Link Control Protocol））。
		LCP 用于就封装格式选项自动的达成一致，处理数据包大小的变化，
		探测 looped-back 链路和其他普通的配置错误，以及终止链路。
		提供的其他可选设备有：对链路中对等单元标识的认证，和链路功能正常或链路失败情况下的决定。
	网络控制协议：
		一种扩展链路控制协议，用于建立、配置、测试和管理数据链路连接。
	配置：
		通过链路控制协议使 PPP 链路很容易配置。
		该机制也应用于其它控制协议如网络控制协议（NCPs） 
	为了建立点对点链路通信，PPP 链路的每一端，必须首先发送 LCP 包以便设定和测试数据链路。
	在链路建立之后，LCP 可选设备才可以被认证。
	然后，PPP 必须发送 NCP 包以便选择和设定一个或更多的网络层协议。
	一旦每个被选择的网络层协议都被设定好了，来自每个网络层协议的数据报就能在连路上发送了。
	链路将保持通信设定不变，直到外在的 LCP 和 NCP 关闭链路，
	或者是发生一些外部事件的时候（如，休止状态的定时器期满或者网络管理员干涉）。
               